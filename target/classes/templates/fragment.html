<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Fragments</title>
</head>
<body>


<div th:fragment="header">
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
        <div class="container">
            <a class="navbar-brand" th:href="@{/}"><span>Study</span>Lab</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
                    aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="oi oi-menu"></span> Menu
            </button>

            <div class="collapse navbar-collapse" id="ftco-nav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a th:href="@{/}" class="nav-link">Home</a></li>
                    <li class="nav-item"><a th:href="@{/about}" class="nav-link">About</a></li>
                    <li class="nav-item"><a th:href="@{/course}" class="nav-link">Course</a></li>
                    <li class="nav-item"><a th:href="@{/instructor}" class="nav-link">Instructor</a></li>
                    <li class="nav-item"><a th:href="@{/blog}" class="nav-link">Blog</a></li>
                    <li class="nav-item"><a th:href="@{/contact}" class="nav-link">Contact</a></li>
                    <!-- Step 6: Show the lecturer dashboard link only to the LECTURER role -->
                    <li class="nav-item" sec:authorize="hasRole('LECTURER')">
                        <a th:href="@{/lecturer/dashboard}" class="nav-link">Lecturer Dashboard</a>
                    </li>
                    <li class="nav-item" sec:authorize="hasRole('STUDENT')">
                        <a th:href="@{/student/dashboard}" class="nav-link">Student Dashboard</a>
                    </li>

                    <li class="nav-item" sec:authorize="!isAuthenticated()">
                        <a th:href="@{/login}" class="nav-link">Login</a>
                    </li>
                    <li class="nav-item" sec:authorize="isAuthenticated()">
                        <a th:href="@{/logout}" class="nav-link">Logout</a>
                    </li>

                    <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
                        <a class="nav-link dropdown-toggle position-relative" href="#" id="notificationDropdown" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-bell fa-lg"></i>
                            <span class="badge badge-danger badge-pill"
                                  th:if="${unreadNotificationCount > 0}"
                                  th:text="${unreadNotificationCount}"
                                  style="position: absolute; top: 20%; right: 40%; transform: translate(40%, -40%); min-width: 1.2rem; height: 1.2rem; display: flex; align-items: center;
                                  justify-content: center; font-size: 0.65rem;">

                            </span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="notificationDropdown"
                             style="min-width: 320px; max-height: 400px; overflow-y: auto;">
                            <h6 class="dropdown-header">Notifications</h6>
                            <div th:if="${#lists.isEmpty(notifications)}" class="dropdown-item text-muted">
                                You're all caught up!
                            </div>
                            <div th:each="notification : ${notifications}"
                                 class="dropdown-item d-flex justify-content-between align-items-start">
                                <div class="pr-2">
                                    <div class="font-weight-bold" th:text="${notification.title}"></div>
                                    <div class="small" th:text="${notification.message}"></div>
                                    <div class="small text-muted"
                                         th:text="${#temporals.format(notification.createdAt, 'MMM dd, yyyy HH:mm')}"></div>
                                </div>
                                <form th:if="${!notification.read}"
                                      th:action="@{'/notifications/' + ${notification.id} + '/read'}" method="post">
                                    <button type="submit" class="btn btn-link btn-sm p-0">Mark as read</button>
                                </form>
                                <div th:if="${notification.read}" class="badge badge-light align-self-center">Read</div>
                            </div>
                            <div class="dropdown-divider" th:if="${!#lists.isEmpty(notifications)}"></div>
                            <form th:if="${!#lists.isEmpty(notifications)}" th:action="@{/notifications/read-all}" method="post"
                                  class="dropdown-item text-center">
                                <button type="submit" class="btn btn-link btn-sm">Mark all as read</button>
                            </form>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

<div th:fragment="footer">
    <footer class="ftco-footer ftco-no-pt">
        <div class="container">
            <div class="row mb-5">
                <div class="col-md pt-5">
                    <div class="ftco-footer-widget pt-md-5 mb-4">
                        <h2 class="ftco-heading-2">About</h2>
                        <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
                        <ul class="ftco-footer-social list-unstyled float-md-left float-lft">
                            <li class="ftco-animate"><a href="#"><span class="fa fa-twitter"></span></a></li>
                            <li class="ftco-animate"><a href="#"><span class="fa fa-facebook"></span></a></li>
                            <li class="ftco-animate"><a href="#"><span class="fa fa-instagram"></span></a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md pt-5">
                    <div class="ftco-footer-widget pt-md-5 mb-4 ml-md-5">
                        <h2 class="ftco-heading-2">Help Desk</h2>
                        <ul class="list-unstyled">
                            <li><a href="#" class="py-2 d-block">Customer Care</a></li>
                            <li><a href="#" class="py-2 d-block">Legal Help</a></li>
                            <li><a href="#" class="py-2 d-block">Services</a></li>
                            <li><a href="#" class="py-2 d-block">Privacy and Policy</a></li>
                            <li><a href="#" class="py-2 d-block">Refund Policy</a></li>
                            <li><a href="#" class="py-2 d-block">Call Us</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md pt-5">
                    <div class="ftco-footer-widget pt-md-5 mb-4">
                        <h2 class="ftco-heading-2">Recent Courses</h2>
                        <ul class="list-unstyled">
                            <li><a href="#" class="py-2 d-block">Computer Engineering</a></li>
                            <li><a href="#" class="py-2 d-block">Web Design</a></li>
                            <li><a href="#" class="py-2 d-block">Business Studies</a></li>
                            <li><a href="#" class="py-2 d-block">Civil Engineering</a></li>
                            <li><a href="#" class="py-2 d-block">Computer Technician</a></li>
                            <li><a href="#" class="py-2 d-block">Web Developer</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md pt-5">
                    <div class="ftco-footer-widget pt-md-5 mb-4">
                        <h2 class="ftco-heading-2">Have a Questions?</h2>
                        <div class="block-23 mb-3">
                            <ul>
                                <li><span class="icon fa fa-map-marker"></span><span class="text">203 Fake St. Mountain View, San Francisco, California, USA</span></li>
                                <li><a href="#"><span class="icon fa fa-phone"></span><span class="text">+2 392 3929 210</span></a></li>
                                <li><a href="#"><span class="icon fa fa-paper-plane"></span><span class="text">info@yourdomain.com</span></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 text-center">

                    <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                </div>
            </div>
        </div>
    </footer>
</div>

</body>
</html>